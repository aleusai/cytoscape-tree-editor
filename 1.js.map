{"version":3,"sources":["webpack:///./src/js/components/myace.js"],"names":["MyAce","props","useState","zIndex","dimensions","editorHeight","editorWidth","value","active","myObject","setObject","useEffect","mouseOver","nodeData","jstr","JSON","stringify","data","tokenMouseOver","listenerMouseOver","nodeClick","tokenClick","listenerClick","nodeEdit","editedNodeData","value_0","length","parse","value_1","tokenEditedNode","listenerEditedNode","unmountUnsubscribe","unsubscribe","onChange","newValue","newValue_0","newValue_1","funcSubmit","e","actionTo","onClickSplit","myButton","noSplit","undefined","position","editorInstance","$container","style","resize","document","addEventListener","keyEditor","useWorker","mymode","mytheme","myname","$blockScrolling","width","height"],"mappings":"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","file":"1.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { split as SplitEditor } from \"react-ace\";\n//import { split as SplitEditor } from \"react-ace/dist/react-ace.min.js\";\nimport ace from \"ace-builds/src-min-noconflict/ace\";\nimport \"ace-builds/webpack-resolver\";\nimport \"ace-builds/src-noconflict/mode-json\";\nimport \"ace-builds/src-noconflict/theme-solarized_light\";\nimport \"ace-builds/src-noconflict/ext-searchbox\";\n//import PubSub from \"pubsub-js\";\nimport Button from \"react-bootstrap/Button\";\n//import { unsubscribe } from \"pubsub-js\";\n\nfunction MyAce(props) {\n  /*  Default active value is 'B' so as to set the mode for both \n        editors' windows correctly\n      */\n  //static contextType = SocketContext;\n  const [myObject, setObject] = useState({\n    zIndex: 1000000,\n    dimensions: {\n      editorHeight: 400,\n      editorWidth: \"auto\",\n    },\n    value: [],\n    active: \"B\",\n  });\n\n  useEffect(() => {\n\n    function mouseOver(nodeData) {\n      var jstr =\n        typeof nodeData != \"string\" ? JSON.stringify(nodeData, null, 4) : data;\n\n      setObject((myObject) => {\n        if (typeof myObject.value[1] != \"undefined\") {\n          return {\n            ...myObject,\n            value: [jstr, myObject.value[1]],\n          };\n        } else {\n          return { ...myObject, value: [jstr] };\n        }\n      });\n    }\n    const tokenMouseOver = props.listenerMouseOver(mouseOver);\n\n    function nodeClick(nodeData) {\n      var jstr =\n        typeof nodeData != \"string\"\n          ? JSON.stringify(nodeData, null, 4)\n          : nodeData;\n      if (myObject.active == \"B\") {\n        setObject((myObject) => ({\n          ...myObject,\n          value: [myObject.value[0], jstr],\n        }));\n      }\n    }\n    const tokenClick = props.listenerClick(nodeClick);\n\n    function nodeEdit(editedNodeData) {\n      var jstr = editedNodeData;\n      var value_0 =\n        myObject.value[0].length > 0 &&\n        jstr[\"id\"] == JSON.parse(myObject.value[0])[\"id\"]\n          ? JSON.stringify(jstr, null, 4)\n          : myObject.value[0];\n      var value_1 =\n        myObject.value[1].length > 0 &&\n        jstr[\"id\"] == JSON.parse(myObject.value[1])[\"id\"]\n          ? JSON.stringify(jstr, null, 4)\n          : myObject.value[1];\n      setObject((myObject) => ({ ...myObject, value: [value_0, value_1] }));\n    }\n    const tokenEditedNode = props.listenerEditedNode(nodeEdit);\n\n    function unmountUnsubscribe() {\n      props.unsubscribe(tokenMouseOver);\n      props.unsubscribe(tokenClick);\n      props.unsubscribe(tokenEditedNode);\n    }\n    return unmountUnsubscribe;\n  }, [myObject]);\n\n  function onChange(newValue) {\n    if (newValue.length == 2) {\n      var value =\n        JSON.stringify(newValue[0]) === JSON.stringify(myObject.value[0])\n          ? [newValue[1], newValue[1]]\n          : [newValue[0], newValue[0]];\n    } else {\n      let newValue_0 = newValue[0] ? newValue[0] : \"\";\n      let newValue_1 = newValue[1] ? newValue[1] : \"\";\n      var value = [newValue_0, newValue_1];\n    }\n\n    setObject({ ...myObject, value: value });\n  }\n  function funcSubmit(e) {\n    if (myObject.value[0]) props.actionTo(myObject.value[0]);\n    if (myObject.value[1]) props.actionTo(myObject.value[1]);\n  }\n\n  function onClickSplit() {\n    if (myObject.active == \"B\") {\n      setObject({ ...myObject, active: \"A\" });\n    } else {\n      setObject({ ...myObject, active: \"B\" });\n    }\n  }\n\n  let myButton;\n  if (props.noSplit !== undefined && props.noSplit === \"true\") {\n    myButton = <div> </div>;\n  } else {\n    myButton = <Button onClick={onClickSplit}> Split </Button>;\n  }\n  let zIndex = myObject.zIndex;\n  return (\n    <div\n      className=\"overflow: auto;\n        resize: both; height: 400 px; width: auto;\n        \"\n      style={{ position: 'relative', zIndex: zIndex }}\n    >\n      {myButton}{\" \"}\n      <Button variant=\"dark\" onClick={funcSubmit}>\n        {\" \"}\n        Editor Submit{\" \"}\n      </Button>{\" \"}\n      <div\n        className=\"overflow: auto;\n        resize: both; height: 400 px; width: auto;\n        \"\n      >\n        {\" \"}\n        <SplitEditor\n          onLoad={(editorInstance) => {\n            editorInstance.$container.style.resize = \"both\";\n            // mouseup = css resize end\n            document.addEventListener(\"mouseup\", (e) =>\n              editorInstance.resize()\n            );\n          }}\n          value={myObject.value}\n          keyEditor={props.keyEditor}\n          splits={myObject.active == \"A\" ? 1 : 2}\n          setOptions={{\n            useWorker: false,\n          }}\n          mode={props.mymode}\n          theme={props.mytheme || \"solarized_light\"}\n          name={props.myname}\n          hasCssTransforms=\"true\"\n          setUseSoftTabs=\"true\"\n          showInvisibles=\"true\"\n          onChange={onChange}\n          editorProps={{\n            $blockScrolling: true,\n          }}\n          width={props.width || \"60em\"}\n          height={props.height || \"40em\"}\n        />{\" \"}\n      </div>{\" \"}\n    </div>\n  );\n}\n\nexport default MyAce;\n"],"sourceRoot":""}